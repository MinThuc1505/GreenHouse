<!DOCTYPE html>

<html class="no-js" lang="" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{client/main-layout.html :: layout (~{::title}, ~{::#layout})}">

<head>
	<title>Hồ sơ cá nhân</title>
</head>


<th:block id="layout">
	<section class="page-header" ng-controller="profileController">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div class="content">
						<h1 class="page-name">Tài Khoản</h1>
						<ol class="breadcrumb">
							<li><a href="admin/index">Trang Chủ</a></li>
							<li class="active">Tài Khoản</li>
						</ol>
					</div>
				</div>
			</div>
		</div>

		<div class="container profile-container">
			<br>
			<br>
			<div class="row">
				<form id="myForm">

					<div class="col-lg-12">
						<div class="media-body">
							<div class="form-group">
								<label for="username">Tên tài khoản:</label>
								<input type="text" id="username" class="form-control" name="username"
									ng-model="accountData.username" ng-readonly="true" />
								<small class="text-danger"></small>
							</div>
							<div class="form-group">
								<label for="fullname">Họ và tên:</label>
								<input type="text" id="fullname" class="form-control" name="fullname"
									ng-model="accountData.fullName" />
								<small class="text-danger"></small>
							</div>
							<div class="form-group">
								<label for="email">Email:</label>
								<input type="email" id="email" class="form-control" name="email"
									ng-model="accountData.email" />
								<small class="text-danger"></small>
							</div>
							<div class="form-group">
								<label for="phone">Số điện thoại:</label>
								<input type="text" id="phone" class="form-control" name="phone"
									ng-model="accountData.phone" />
								<small class="text-danger"></small>
							</div>
							<div class="form-group">
								<label for="address">Địa chỉ:</label>
								<input type="text" id="address" class="form-control" name="address"
									ng-model="accountData.address" />
							</div>
							<button ng-click="updateAccount()">Cập nhật tài khoản</button>
						</div>
					</div>
				</form>
			</div>
			<br>
			<hr>
			<br>
			<div class="row">
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
					<div class="normal-table-list mg-t-30">
						<div class="basic-tb-hd">
							<h2>Đơn mua</h2>
						</div>
						<div class="bsc-tbl-hvr">
							<table class="table table-striped table-hover">
								<thead>
									<tr>
										<th class="text-center">#</th>
										<th>Người nhận</th>
										<th>Số lượng</th>
										<th>Giảm giá (%)</th>
										<th>Tổng tiền</th>
										<th>Ngày mua</th>
										<th>Hành động</th>
									</tr>
								</thead>
								<tbody>
									<tr ng-repeat="item in bills" class="tr-title-product">
										<td class="text-center">{{$index + 1}}</td>
										<td>{{item[7]}}</td>
										<td>{{item[2]}}</td>
										<td>{{item[4] || 0}}%</td>
										<td>
											<span ng-if="item[4] != 0">
												<del style="color: rgb(128, 128, 128);">{{item[3] | number: 0}}</del>
												{{item[5] | number: 0}} VND
											</span>
											<span ng-if="item[4] == 0">
												{{item[5] | number:0}} VND
											</span>
										</td>

										<td>{{item[1] | date:'HH:mm ~ dd-MM-yyyy'}}</td>
										<td>
											<button class="btn btn-success" ng-click="showBillDetailsModal(item[0])">Chi
												tiết</button>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Modal -->
		<div class="modal product-modal fade" id="billDetailsModal" tabindex="-1" role="dialog">
			<div class="modal-dialog modal-dialog-centered" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h3 class="modal-title"><b>Chi tiết hóa đơn</b></h3>
					</div>
					<div class="modal-body">
						<!-- Thông tin hóa đơn -->
						<p><strong>Người nhận:</strong> {{ selectedBillDetails[0][0] }}</p>
						<p><strong>Số điện thoại:</strong> {{ selectedBillDetails[0][1] }}</p>
						<p><strong>Địa chỉ nhận hàng:</strong> {{ selectedBillDetails[0][2] }}</p>

						<!-- Bảng chi tiết sản phẩm -->
						<table class="table table-bordered">
							<thead>
								<tr>
									<th>#</th>
									<th>Tên sản phẩm</th>
									<th>Đơn giá</th>
									<th>Số lượng</th>
									<th>Thành tiền</th>
									<th></th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="item in selectedBillDetails">
									<td>{{$index + 1}}</td>
									<td class="product-name-box">
										<img style="width: 80px" ng-src="{{ '/images/' + item[4] }}"
											alt="product-img" />
										<p class="product-name">{{item[5]}}</p>
									</td>
									<td>{{item[6] | number:0}} VND</td>
									<td>{{item[7]}}</td>
									<td>{{item[8] | number:0}} VND</td>
									<td>
										<a href="#!" ng-click="viewProductDetails(item[3])" class="btn btn-info">Xem sản
											phẩm</a>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Đóng</button>
					</div>
				</div>
			</div>
		</div>
		<!-- /.modal -->


		<script>
			const imageInput = document.getElementById('profile-image-input');
			const imagePreview = document.getElementById('profile-image-preview');

			imageInput.addEventListener('change', function () {
				const file = imageInput.files[0]; // Assuming you're selecting only one image
				if (file) {
					const reader = new FileReader();
					reader.onload = function (event) {
						imagePreview.src = event.target.result;
					};
					reader.readAsDataURL(file);
				} else {
					imagePreview.src = ''; // Clear the preview if no image is selected
				}
			});
		</script>
	</section>
</th:block>

</html>