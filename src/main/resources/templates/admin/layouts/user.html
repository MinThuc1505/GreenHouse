<!doctype html>
<html class="no-js" lang="" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{admin/main-layout.html :: layout (~{::title}, ~{::#layout})}">

<head>
	<title>Quản lý người dùng</title>
</head>

<body>
	<section id="layout" ng-controller="userController">
		<!-- Compose user area Start-->
		<div class="inbox-area">
			<div class="container">
				<div class="row header-filter-product header-action-product">
					<div class="filter-search col-md-6">
						<div class="input-group">
							<input type="text" class="form-control" placeholder="Tìm kiếm nhiều tài khoản...">
							<span class="input-group-btn">
								<button class="btn btn-default" type="button"><span
										class="glyphicon glyphicon-search"></span></button>
							</span>
						</div>
					</div>
					<div class="action-product col-md-6">
						<button type="button" class="btn btn-success" data-toggle="modal" data-target="#userModal">
							Thêm mới
						</button>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
						<table class="table table-striped">
							<thead>
								<tr class="table-bordered custom-border tr-thead">
									<th class="text-center">#</th>
									<th>Tên tài khoản</th>
									<th>Họ và tên</th>
									<th>Email</th>
									<th>Số điện thoại</th>
									<th>Giới tính</th>
									<th>Địa chỉ</th>
									<th>Hình ảnh</th>
									<th>Ngày tạo tài khoản</th>
								</tr>
							</thead>
							<tbody ng-repeat="item in items">
								<tr data-toggle="collapse" data-target="#{{$index + 1}}" class="tr-title-product"
									ng-click="Edit(item.username)">
									<td class="text-center">{{$index + 1}}</td>
									<td>{{item.username}}</td>
									<td>{{item.fullName}}</td>
									<td>{{item.email}}</td>
									<td>{{item.phone}}</td>
									<td>{{item.gender ? 'Nam' : 'Nữ'}}</td>
									<td>{{item.address}}</td>
									<td>{{item.image}}</td>
									<td>{{item.createDate | date:'HH:mm dd-MM-yyyy'}}</td>

								</tr>
								<tr id="{{$index + 1}}" class="collapse">
									<td colspan="12" class="product-info border-1">
										<h4>Thông tin tài khoản</h4>
										<form>
											<div class="row">
												<div class="col-md-4">
													<div class="form-group"
														style="border: 1px solid rgb(221, 218, 218); height: 250px;">
														<div class="nk-int-st image-container">
															<img class="object-fit" id="product4" src="#"
																alt="Uploaded Image"
																style="display: none; max-height: 250px; width: 100%;">
														</div>

													</div>
													<div class="form-group mt-3">
														<label for="fileInput" class="fw-bold">Chọn Hình</label>
														<div class="input-group">
															<input style="object-fit: contain;" type="file"
																class="form-control" id="fileInput"
																onchange="displayImageUser(event, 'product4')">
														</div>
													</div>
												</div>
												<div class="col-md-8">
													<div class="row">
														<div class="col-md-6">
															<div class="form-group mt-3">
																<label for="username" class="fw-bold">Tên tài
																	khoản</label>
																<input type="text" class="form-control border-bottom"
																	id="username" ng-model="form.username" required>
															</div>
															<div class="form-group mt-3">
																<label for="fullname" class="fw-bold">Họ và tên</label>
																<input type="text" class="form-control border-bottom"
																	id="fullname" ng-model="form.fullName" required>
															</div>
															<div class="form-group mt-3">
																<label for="email" class="fw-bold">Email</label>
																<input type="text" class="form-control border-bottom"
																	id="email" ng-model="form.email" required>
															</div>
															<div class="form-group mt-3">
																<label for="phone" class="fw-bold">Số điện thoại</label>
																<input type="tel" class="form-control border-bottom"
																	id="phone" ng-model="form.phone" required>
															</div>
														</div>
														<div class="col-md-6">
															<div class="form-group mt-3">
																<label for="password" class="fw-bold">Mật khẩu</label>
																<input type="password" class="form-control border-bottom" id="password"
																	ng-model="form.password" name="password" required>
															</div>
															<div class="form-group mt-3">
																<label class="fw-bold">Giới tính</label>
																<div class="form-check">
																	<input type="radio" class="form-check-input"
																		name="gender" id="gender" ng-model="form.gender"
																		ng-value="true" required>
																	<label class="form-check-label"
																		for="gender">Nam</label>
																	<input type="radio" class="form-check-input"
																		name="gender" id="gender" ng-model="form.gender"
																		ng-value="false" required>
																	<label class="form-check-label"
																		for="gender">Nữ</label>
																</div>
															</div>

															<div class="form-group mt-3">
																<label for="address" class="fw-bold">Địa chỉ</label>
																<input type="text" class="form-control border-bottom"
																	id="address" ng-model="form.address" required>
															</div>
															<div class="form-group mt-3">
																	<label for="createDate" class="fw-bold">Ngày tạo tài
																		khoản</label>
																	<input type="datetime-local"
																		class="form-control border-bottom"
																		id="createDate" ng-model="form.createDate"
																		ng-value="form.createDate" required>
															</div>
																
															<div class="form-group mt-3">
																	<label class="fw-bold">Vai trò</label>
																	    <div class="radio">
																	        <label>
																	            <input type="radio" name="role" value="user" ng-model="form.role_id" ng-checked="form.role_id.name === 'User'">
																	            Người dùng
																	        </label>
																	         <label>
																	            <input type="radio" name="role" value="admin" ng-model="form.role_id" ng-checked="form.role_id.name === 'Admin'">
																	            Quản lý
																	  </label>
																</div>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-12 text-right mt-5">
													<div class="btn-group ib-btn-gp active-hook nk-email-inbox">

														<button class="btn btn-primary notika-btn-primary waves-effect" ng-click="Update(item.username)">
															<i class="fa fa-save"></i> Lưu
														</button>
														<button class="btn btn-danger notika-btn-danger waves-effect" ng-click="Delete(item.username)">
															<i class="fa fa-trash"></i> Xóa
														</button>
													</div>
												</div>
											</div>
										</form>
									</td>
								</tr>


								<!-- Thêm các dòng sản phẩm khác tương tự ở đây -->
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
		<script>
			function displayImageUser(event, idImg) {
				var image = document.getElementById(idImg);
				image.src = URL.createObjectURL(event.target.files[0]);
				image.style.display = "block";
			}
		</script>


		<!-- The Modal -->
		<div class="modal fade" id="userModal">
			<div class="modal-dialog modal-dialog-centered modal-lg">
				<div class="modal-content">
					<!-- Modal Header -->
					<div class="modal-header">
						<h4 class="modal-title">Thêm tài khoản</h4>
						<button type="button" class="close" data-dismiss="modal">&times;</button>
					</div>

					<!-- Modal body -->
					<div class="modal-body">
						<form>
							<div class="row">
								<div class="col-md-4">
									<div class="form-group"
										style="border: 1px solid rgb(221, 218, 218); height: 250px;">
										<div class="nk-int-st image-container">
											<img class="object-fit" id="imgUser" src="#" alt="Uploaded Image"
												style="display: none; max-height: 250px; width: 100%;">
										</div>
									</div>
									<div class="form-group mt-3">
										<label for="fileInput" class="fw-bold">Chọn Hình</label>
										<div class="input-group">
											<input style="object-fit: contain;" type="file" class="form-control"
												accept=".png, .jpg, .jpeg, .gif" id="fileInputCreateUser" onchange="displayImageUser(event, 'imgUser')" ng-model="image">
										</div>
									</div>
								</div>
								<div class="col-md-8">
									<div class="row">
										<div class="col-md-6">
											<div class="form-group mt-3">
												<label for="username" class="fw-bold">Tên tài khoản</label>
												<input type="text" class="form-control border-bottom" id="username"
													ng-model="username" name="username" required>
											</div>
											<div class="form-group mt-3">
												<label for="fullname" class="fw-bold">Họ và tên</label>
												<input type="text" class="form-control border-bottom" id="fullname"
													ng-model="fullName" name="fullname" required>
											</div>
											<div class="form-group mt-3">
												<label for="email" class="fw-bold">Email</label>
												<input type="email" class="form-control border-bottom" id="email"
													ng-model="email" name="email" required>
											</div>
											<div class="form-group mt-3">
												<label for="phone" class="fw-bold">Số điện thoại</label>
												<input type="tel" class="form-control border-bottom" id="phone"
													ng-model="phone" name="phone" required>
											</div>

										</div>
										<div class="col-md-6">
										
											<div class="form-group mt-3">
												<label for="password" class="fw-bold">Mật khẩu</label>
												<input type="password" class="form-control border-bottom" id="password"
													ng-model="password" name="password" required>
											</div>

											<div class="form-group mt-3">
												<label class="fw-bold">Giới tính</label>
												<div class="form-check">
													<input type="radio" class="form-check-input" name="gender"id="gender"  value="true" ng-model="gender"> 
													<label class="form-check-label"for="gender">Nam</label> 
													<input type="radio" class="form-check-input" name="gender" id="gender"  value="false" ng-model="gender">
													<label class="form-check-label" for="gender">Nữ</label>
												</div>
											</div>

											<div class="form-group mt-3">
												<label for="address" class="fw-bold">Địa chỉ</label>
												<input type="text" class="form-control border-bottom" id="address" ng-model="address">
											</div>
											<div class="form-group mt-3">
												<label class="fw-bold">Vai trò</label>
												    <div class="radio">
												        <label>
												            <input type="radio" name="role" value="user" ng-model="form.role_id">
												            Người dùng
												        </label>
												         <label>
												            <input type="radio" name="role" value="admin" ng-model="form.role_id">
												            Quản lý
												        </label>
												    </div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</form>
					</div>

					<!-- Modal footer -->
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" ng-click="Create()" ng-disabled="myForm.$invalid"><i class="fa fa-save"></i> Lưu</button>
						<button type="button" class="btn btn-info"><i class="fa fa-rotate-right"></i> Làm mới</button>
					</div>
				</div>
			</div>
		</div>

	</section>
</body>

</html>